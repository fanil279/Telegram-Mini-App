model Message {

    id BigInt @id @default(autoincrement())

    match Match? @relation(fields: [matchId], references: [id], onDelete: SetNull)
    matchId BigInt? @map("match_id")

    senderTelegram User? @relation("SenderTelegramId", fields: [senderTelegramId], references: [telegramId], onDelete: SetNull)
    senderTelegramId BigInt? @map("sender_telegram_id")

    receiverTelegram User? @relation("ReceiverTelegramId", fields: [receiverTelegramId], references: [telegramId], onDelete: SetNull)
    receiverTelegramId BigInt? @map("receiver_telegram_id")

    reply Message? @relation("MessageReplies", fields: [replyToId], references: [id], onDelete: SetNull)
    replyToId BigInt? @map("reply_to_id")

    content String
    isRead Boolean @default(false) @map("is_read")

    createdAt DateTime @default(now()) @map("created_at")
    updatedAt DateTime @updatedAt

    @@index([matchId, senderTelegramId, receiverTelegramId, replyToId, createdAt])

    @@map("messages")

    @@schema("base")


    replies Message[] @relation("MessageReplies")
    attachments MessageAttachment[]
    report Report? @relation("MessageReport")
    notification Notification? @relation("MessageNotification")

}
