enum Gender {

    MALE
    FEMALE

    @@map("gender")
    @@schema("base")

}

enum Role {

    USER
    MODERATOR
    ADMIN

    @@map("role")
    @@schema("base")

}

model User {

    id BigInt @id @default(autoincrement())
    telegramId BigInt @unique

    gender Gender
    username String? @db.VarChar(32)
    fullname String @db.VarChar(64)
    bio String? @db.VarChar(70)

    city String @db.VarChar(32)
    age Int
    nationality String? @db.VarChar(15)

    plan SubscriptionPlanType @default(FREE)
    role Role @default(USER)

    createdAt DateTime @default(now()) @map("created_at")
    updatedAt DateTime @updatedAt @map("updated_at")

    @@index([telegramId, gender, city])

    @@map("users")

    @@schema("base")


    photos UserAvatar[]
    preferences UserPreference[]
    user1Chat Chat[] @relation("User1Chat")
    user2Chat Chat[] @relation("User2Chat")
    senderId Message[] @relation("SenderId")
    receiverId Message[] @relation("ReceiverId")
    likesGiven Like[] @relation("LikesGiven")
    likesReceived Like[] @relation("LikesReceived")
    user1Matches Match[] @relation("User1Matches")
    user2Matches Match[] @relation("User2Matches")
    blockedByUsers Block[] @relation("BlockedByUsers")
    blockedUsers Block[] @relation("BlockedUsers")
    reportsMade Report[] @relation("ReporterId")
    reportsReceived Report[] @relation("ReportedId")
    reportsReviewed Report[] @relation("ReviewedBy")
    notifications Notification[]
    payments Payment[]

}
