enum PaymentMethod {

    UZCARD
    HUMO
    VISA

}

enum CurrencyType {

    UZS
    USD

}


enum PaymentStatus {

    PENDING
    COMPLETED
    FAILED

}

model Payment {

    id BigInt @id @default(autoincrement())
    transactionId String? @db.VarChar(128) @unique

    user User @relation(fields: [userId], references: [id], onDelete: Cascade)
    userId BigInt

    subscription Subscription? @relation(fields: [subscriptionId], references: [id], onDelete: Cascade)
    subscriptionId BigInt?

    method PaymentMethod
    amount Decimal  @db.Decimal(10,2)
    currency CurrencyType
    status PaymentStatus

    createdAt DateTime @default(now())

    @@index([userId, transactionId, subscriptionId, createdAt])


    notifications Notification? @relation("PaymentNotifications")

}
