enum ReasonType {

    SPAM
    SCAM
    HARASSMENT
    INAPPROPRIATE_CONTENT
    MESSAGE_IGNORED
    OTHER

}

enum Status {

    PENDING
    RESOLVED
    REJECTED

}

model Report {

    id BigInt @id @default(autoincrement())

    match Match? @relation(fields: [matchId], references: [id], onDelete: SetNull)
    matchId BigInt?

    message Message? @relation("MessageReport", fields: [messageId], references: [id], onDelete: SetNull)
    messageId BigInt? @unique

    reporter User? @relation("ReporterId", fields: [reporterId], references: [id], onDelete: SetNull)
    reporterId BigInt?

    reported User? @relation("ReportedId", fields: [reportedId], references: [id], onDelete: SetNull)
    reportedId BigInt?

    reviewedBy User? @relation("ReviewedBy", fields: [reviewedById], references: [id], onDelete: SetNull)
    reviewedById BigInt?

    reason ReasonType
    explanation String? @db.VarChar(255)
    status Status @default(PENDING)

    createdAt DateTime @default(now())

    @@unique([reporterId, reportedId, reason])

    @@index([reporterId, reportedId, createdAt])

}
